{"version":3,"file":"Light.js","sourceRoot":"","sources":["../../src/AR/Light.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,EAAE,EAAE,MAAM,MAAM,CAAC;AAC1B,OAAO,EAAE,MAAM,mBAAmB,CAAC;AAEnC,OAAO,KAAK,MAAM,UAAU,CAAC;AAE7B,aAAa;AACb,MAAM,gBAAgB,GAAG,EAAE,CAAC,cAAc,IAAI,EAAE,CAAC,eAAe,CAAC;AAEjE,MAAM,KAAM,SAAQ,KAAK,CAAC,UAAU;IAClC;QACE,KAAK,CAAC,QAAQ,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC;QAG7B,UAAK,GAA8B,IAAI,CAAC;IAFxC,CAAC;IAGD,IAAI,IAAI,CAAC,KAAgC;QACvC,IAAI,KAAK,KAAK,IAAI,CAAC,KAAK,EAAE;YACxB,OAAO;SACR;QACD,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,KAAK,EAAE;YACV,OAAO;SACR;QAED,MAAM,EAAE,gBAAgB,EAAE,uBAAuB,EAAE,GAAG,KAAK,CAAC;QAE5D,IAAI,CAAC,KAAK,GAAG,gBAAgB,CAAC,CAAC,QAAQ;QAEvC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,oBAAoB,CAAC,uBAAuB,CAAC,CAAC;QAC9E,IAAI,CAAC,KAAK,GAAG,IAAI,KAAK,CAAC,KAAK,CAAC,GAAG,GAAG,KAAK,EAAE,KAAK,GAAG,KAAK,EAAE,IAAI,GAAG,KAAK,CAAC,CAAC;IACzE,CAAC;IAED,MAAM;QACJ,MAAM,EAAE,eAAe,GAAG,IAAI,EAAE,GAAG,EAAE,CAAC,eAAe,CAAC;YACpD,CAAC,gBAAgB,CAAC,eAAe,CAAC,EAAE,IAAI;SACzC,CAAC,CAAC;QACH,IAAI,CAAC,IAAI,GAAG,eAAe,CAAC;IAC9B,CAAC;CACF;AAED,eAAe,KAAK,CAAC","sourcesContent":["import { AR } from 'expo';\nimport ct from 'color-temperature';\n\nimport THREE from '../Three';\n\n// @ts-ignore\nconst ARFrameAttribute = AR.FrameAttribute || AR.FrameAttributes;\n\nclass Light extends THREE.PointLight {\n  constructor() {\n    super(0xffee88, 1, 100, 2);\n  }\n\n  _data: AR.LightEstimation | null = null;\n  set data(value: AR.LightEstimation | null) {\n    if (value === this._data) {\n      return;\n    }\n    this._data = value;\n    if (!value) {\n      return;\n    }\n\n    const { ambientIntensity, ambientColorTemperature } = value;\n\n    this.power = ambientIntensity; // 1000;\n\n    const { red, green, blue } = ct.colorTemperature2rgb(ambientColorTemperature);\n    this.color = new THREE.Color(red / 255.0, green / 255.0, blue / 255.0);\n  }\n\n  update(): void {\n    const { lightEstimation = null } = AR.getCurrentFrame({\n      [ARFrameAttribute.LightEstimation]: true,\n    });\n    this.data = lightEstimation;\n  }\n}\n\nexport default Light;\n"]}